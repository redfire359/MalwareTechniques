# DLL Injection

DLL injection is a technique used for running code within the address space of another process by forcing it to load a dynamic link library. 

This section has 2 programs, one that can be used in a terminal to dynamically pass in a process ID (PID) + DLL, and the other that simply runs upon execution with the hardcoded information already in it. 

Both can be compiled on linux with the mingw-64 binary. Compilation instrucitons are at the top of each .c file.

```bash
sudo apt install gcc-mingw-w64 
```

You can generate a DLL using tools like `msfvenom` to test it out.

```bash
msfvenom -p windows/x64/exec CMD="calc.exe" -f dll -o test.dll
```

## Further reading

- [wiki page](https://en.wikipedia.org/wiki/DLL_injection)

- [Red Team Notes DLL Injection example in C++ ](https://www.ired.team/offensive-security/code-injection-process-injection/dll-injection)

## APIs used

- [OpenProcess](https://learn.microsoft.com/en-us/windows/win32/api/processthreadsapi/nf-processthreadsapi-openprocess)

- [VirtualAllocEx](https://learn.microsoft.com/en-us/windows/win32/api/memoryapi/nf-memoryapi-virtualallocex)

- [WriteProcessMemory](https://learn.microsoft.com/en-us/windows/win32/api/memoryapi/nf-memoryapi-writeprocessmemory)

- [CreateRemoteThread](https://learn.microsoft.com/en-us/windows/win32/api/processthreadsapi/nf-processthreadsapi-createremotethread)

- [GetProcAddress](https://learn.microsoft.com/en-us/windows/win32/api/libloaderapi/nf-libloaderapi-getprocaddress)

- [CloseHandle](https://learn.microsoft.com/en-us/windows/win32/api/handleapi/nf-handleapi-closehandle)

- [CreateRemoteThread](https://learn.microsoft.com/en-us/windows/win32/api/processthreadsapi/nf-processthreadsapi-createremotethread)